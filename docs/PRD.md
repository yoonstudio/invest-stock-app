# Investment MCP - Product Requirements Document (PRD)

## 문서 정보

| 항목 | 내용 |
|------|------|
| 문서 버전 | 1.0 |
| 작성일 | 2026-02-02 |
| 상태 | Draft |
| 프로젝트명 | Investment MCP |

---

## 1. Executive Summary

### 1.1 제품 비전

Investment MCP는 AI 어시스턴트(Claude 등)와 연동하여 실시간 투자 정보를 제공하는 MCP(Model Context Protocol) 기반 서버입니다. 사용자가 자연어로 투자 관련 질문을 하면, AI가 MCP 서버를 통해 실시간 주식 가격, 포트폴리오 분석, 투자 뉴스, 환율 정보를 조회하여 데이터 기반의 정확한 답변을 제공합니다.

### 1.2 문제 정의

**현재 상황**
- 투자자들은 여러 플랫폼(증권사 앱, 뉴스 사이트, 환율 사이트 등)을 번갈아가며 정보를 수집해야 함
- AI 어시스턴트의 투자 관련 답변은 학습 데이터 기준일로 인해 실시간성이 부족함
- 포트폴리오 분석을 위해 별도의 도구나 전문 지식이 필요함

**핵심 Pain Points**
1. 정보 분산: 여러 소스에서 정보를 수집하는 데 시간 소요
2. 실시간성 부재: AI 답변의 데이터가 최신이 아님
3. 분석 장벽: 포트폴리오 분석에 전문 도구/지식 필요
4. 맥락 부족: 투자 결정에 필요한 종합적 맥락 파악 어려움

### 1.3 제안 솔루션

MCP 프로토콜을 활용하여 AI 어시스턴트에 실시간 투자 정보 조회 기능을 통합합니다. 추가로 웹 기반 대시보드를 제공하여 시각적으로 투자 현황을 모니터링할 수 있습니다.

### 1.4 핵심 성공 지표

| 지표 | 목표 |
|------|------|
| MCP 도구 응답 시간 | 평균 2초 이내 |
| 일일 활성 사용자 (DAU) | 출시 3개월 후 1,000명 |
| 도구 호출 성공률 | 99% 이상 |
| 사용자 만족도 (NPS) | 40 이상 |

---

## 2. 제품 목표 및 목적

### 2.1 비즈니스 목표

| 목표 | KPI | 목표치 | 측정 방법 |
|------|-----|--------|----------|
| MCP 생태계 확장 | MCP 클라이언트 연동 수 | 5개 이상 | 연동 로그 분석 |
| 사용자 획득 | 월간 신규 사용자 | 500명/월 | 가입 통계 |
| 사용자 유지 | 월간 리텐션 | 60% | 재방문율 분석 |
| 수익화 기반 구축 | 프리미엄 전환율 | 10% | 구독 통계 |

### 2.2 사용자 목표

| 사용자 유형 | 목표 | 성공 기준 |
|-------------|------|----------|
| 개인 투자자 | 빠른 투자 정보 접근 | 필요한 정보를 30초 내 획득 |
| 포트폴리오 관리자 | 효율적인 자산 분석 | 분석 시간 50% 단축 |
| AI 개발자 | 쉬운 MCP 연동 | 30분 내 연동 완료 |

### 2.3 기술 목표

| 목표 | 상세 |
|------|------|
| 확장성 | 동시 1,000개 연결 처리 가능 |
| 안정성 | 99.9% 가용성 목표 |
| 보안 | API 키 암호화, 요청 검증 |
| 성능 | p95 응답 시간 3초 이내 |

### 2.4 타임라인 개요

| 마일스톤 | 목표일 | 주요 산출물 |
|----------|--------|-------------|
| MVP 출시 | 2026-03-15 | MCP 서버 + 기본 4개 도구 |
| Beta 출시 | 2026-04-30 | 웹 클라이언트 + 추가 도구 |
| 정식 출시 | 2026-06-30 | 전체 기능 + 프리미엄 플랜 |

---

## 3. 사용자 분석

### 3.1 타겟 사용자 페르소나

#### 페르소나 1: 개인 투자자 (Primary)

| 항목 | 내용 |
|------|------|
| 이름 | 김투자 |
| 나이 | 30-45세 |
| 직업 | 회사원, 자영업자 |
| 투자 경험 | 3-5년 |
| 투자 자산 | 1,000만원 - 1억원 |
| 기술 친숙도 | 중상 (스마트폰, PC 활용 능숙) |
| 주요 니즈 | 빠른 시세 확인, 간편한 포트폴리오 관리 |
| Pain Points | 여러 앱 전환 피로, 분석 도구 복잡함 |

#### 페르소나 2: AI 활용 개발자 (Secondary)

| 항목 | 내용 |
|------|------|
| 이름 | 박개발 |
| 나이 | 25-35세 |
| 직업 | 소프트웨어 개발자 |
| 기술 수준 | 고급 |
| 주요 니즈 | AI 에이전트에 투자 기능 추가 |
| Pain Points | 금융 API 연동 복잡성, 문서화 부족 |

#### 페르소나 3: 재테크 입문자 (Tertiary)

| 항목 | 내용 |
|------|------|
| 이름 | 이입문 |
| 나이 | 20-30세 |
| 직업 | 대학생, 신입 사원 |
| 투자 경험 | 1년 미만 |
| 주요 니즈 | 쉬운 투자 정보 이해, 학습 |
| Pain Points | 전문 용어 어려움, 어디서 시작할지 모름 |

### 3.2 사용자 여정 맵

```
[정보 필요 인식] --> [AI에게 질문] --> [MCP 도구 호출] --> [결과 확인] --> [투자 결정]
     |                    |                 |                |              |
     v                    v                 v                v              v
"삼성전자 지금    "삼성전자 현재     get_stock_price   "현재가: 75,000원  "매수/매도/
 사도 될까?"       가격 알려줘"      ("005930.KS")     전일대비 +2.3%"    관망 결정"
```

### 3.3 사용자 스토리

#### Epic 1: 주식 정보 조회

| ID | 스토리 | 우선순위 |
|----|--------|----------|
| US-101 | 개인 투자자로서, 특정 종목의 현재가를 빠르게 알고 싶다. 투자 타이밍을 잡기 위해서이다. | P0 |
| US-102 | 개인 투자자로서, 여러 종목을 한 번에 조회하고 싶다. 시간을 절약하기 위해서이다. | P1 |
| US-103 | 개인 투자자로서, 과거 주가 추이를 알고 싶다. 패턴을 파악하기 위해서이다. | P2 |

#### Epic 2: 포트폴리오 분석

| ID | 스토리 | 우선순위 |
|----|--------|----------|
| US-201 | 포트폴리오 관리자로서, 보유 종목의 수익률을 한눈에 보고 싶다. 성과를 평가하기 위해서이다. | P0 |
| US-202 | 포트폴리오 관리자로서, 자산 배분 현황을 파악하고 싶다. 리스크를 관리하기 위해서이다. | P1 |
| US-203 | 포트폴리오 관리자로서, 리밸런싱 추천을 받고 싶다. 최적의 포트폴리오를 유지하기 위해서이다. | P2 |

#### Epic 3: 투자 뉴스

| ID | 스토리 | 우선순위 |
|----|--------|----------|
| US-301 | 개인 투자자로서, 관심 종목 관련 최신 뉴스를 보고 싶다. 투자 판단에 참고하기 위해서이다. | P0 |
| US-302 | 개인 투자자로서, 시장 전반 뉴스를 요약해서 보고 싶다. 시장 흐름을 파악하기 위해서이다. | P1 |

#### Epic 4: 환율 정보

| ID | 스토리 | 우선순위 |
|----|--------|----------|
| US-401 | 해외 투자자로서, 현재 환율을 알고 싶다. 환전 타이밍을 잡기 위해서이다. | P0 |
| US-402 | 해외 투자자로서, 환율 변동 추이를 알고 싶다. 환율 리스크를 관리하기 위해서이다. | P1 |

---

## 4. 기능 명세

### 4.1 기능 개요

```
+------------------------------------------------------------------+
|                     Investment MCP System                         |
+------------------------------------------------------------------+
|                                                                    |
|  +------------------+     +------------------+                     |
|  |  AI Assistant    |<--->|   MCP Server     |                     |
|  | (Claude, etc.)   |     |  (investment-mcp)|                     |
|  +------------------+     +--------+---------+                     |
|                                    |                               |
|           +------------------------+------------------------+      |
|           |            |           |           |            |      |
|           v            v           v           v            v      |
|    +----------+  +----------+ +----------+ +----------+ +------+   |
|    |  Stock   |  |Portfolio |  |  News   |  |Exchange |  | Web  |  |
|    |  Price   |  | Analysis |  |  Feed   |  |  Rate   |  |Client|  |
|    +----------+  +----------+ +----------+ +----------+ +------+   |
|           |            |           |           |                   |
|           v            v           v           v                   |
|    +----------+  +----------+ +----------+ +----------+            |
|    | Yahoo    |  | Internal |  | News    |  |Exchange |            |
|    | Finance  |  | Logic    |  |   API   |  |Rate API |            |
|    +----------+  +----------+ +----------+ +----------+            |
|                                                                    |
+------------------------------------------------------------------+
```

### 4.2 MCP 서버 기능 (Core)

#### 4.2.1 get_stock_price (P0)

**설명**: 주식 종목의 실시간/지연 시세를 조회합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| symbol | string | Y | 종목 코드 (예: AAPL, 005930.KS) |

**응답 예시**:
```json
{
  "symbol": "005930.KS",
  "name": "삼성전자",
  "currentPrice": 75000,
  "change": 1700,
  "changePercent": 2.32,
  "volume": 15234567,
  "marketCap": 447000000000000,
  "high52Week": 88000,
  "low52Week": 52000,
  "timestamp": "2026-02-02T10:30:00+09:00"
}
```

**Acceptance Criteria**:
- [ ] 유효한 종목 코드로 현재가 조회 가능
- [ ] 미국/한국 주식 모두 지원
- [ ] 잘못된 종목 코드 시 적절한 에러 메시지 반환
- [ ] 응답 시간 2초 이내

#### 4.2.2 analyze_portfolio (P0)

**설명**: 사용자의 포트폴리오를 분석하여 자산 배분, 수익률, 리스크 지표를 제공합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| holdings | array | Y | 보유 종목 배열 |
| holdings[].symbol | string | Y | 종목 코드 |
| holdings[].quantity | number | Y | 보유 수량 |
| holdings[].avgPrice | number | Y | 평균 매수가 |

**응답 예시**:
```json
{
  "totalValue": 15000000,
  "totalCost": 12000000,
  "totalReturn": 3000000,
  "totalReturnPercent": 25.0,
  "holdings": [
    {
      "symbol": "005930.KS",
      "name": "삼성전자",
      "quantity": 100,
      "avgPrice": 60000,
      "currentPrice": 75000,
      "value": 7500000,
      "return": 1500000,
      "returnPercent": 25.0,
      "weight": 50.0
    }
  ],
  "allocation": {
    "technology": 60.0,
    "finance": 25.0,
    "healthcare": 15.0
  },
  "riskMetrics": {
    "beta": 1.2,
    "volatility": 18.5
  }
}
```

**Acceptance Criteria**:
- [ ] 1-50개 종목 포트폴리오 분석 가능
- [ ] 총 수익률 및 개별 종목 수익률 계산
- [ ] 섹터별 자산 배분 제공
- [ ] 입력 데이터 유효성 검증

#### 4.2.3 get_investment_news (P0)

**설명**: 특정 종목 또는 키워드 관련 최신 투자 뉴스를 조회합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| query | string | Y | 검색 키워드 |
| limit | number | N | 조회 개수 (기본값: 5, 최대: 20) |

**응답 예시**:
```json
{
  "query": "삼성전자",
  "articles": [
    {
      "title": "삼성전자, AI 반도체 투자 확대 발표",
      "source": "매일경제",
      "publishedAt": "2026-02-02T09:00:00+09:00",
      "summary": "삼성전자가 AI 반도체 생산 능력 확대를 위해...",
      "url": "https://example.com/news/123",
      "sentiment": "positive"
    }
  ],
  "totalCount": 15
}
```

**Acceptance Criteria**:
- [ ] 키워드 기반 뉴스 검색 동작
- [ ] 최신순 정렬
- [ ] 뉴스 요약 및 원문 링크 제공
- [ ] 감성 분석 결과 포함 (positive/neutral/negative)

#### 4.2.4 get_exchange_rate (P0)

**설명**: 실시간 환율 정보를 조회합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| from | string | Y | 기준 통화 (예: USD) |
| to | string | Y | 대상 통화 (예: KRW) |

**응답 예시**:
```json
{
  "from": "USD",
  "to": "KRW",
  "rate": 1320.50,
  "change": 5.30,
  "changePercent": 0.40,
  "timestamp": "2026-02-02T10:30:00+09:00"
}
```

**Acceptance Criteria**:
- [ ] 주요 통화쌍 환율 조회 가능 (USD, EUR, JPY, CNY, KRW 등)
- [ ] 전일 대비 변동률 제공
- [ ] 잘못된 통화 코드 시 에러 처리

### 4.3 MCP 서버 추가 기능 (Phase 2)

#### 4.3.1 get_stock_chart (P1)

**설명**: 주가 차트 데이터를 조회합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| symbol | string | Y | 종목 코드 |
| period | string | N | 기간 (1d, 5d, 1mo, 3mo, 6mo, 1y, 5y) |
| interval | string | N | 간격 (1m, 5m, 1h, 1d, 1wk, 1mo) |

#### 4.3.2 get_company_info (P1)

**설명**: 기업 정보 및 재무 지표를 조회합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| symbol | string | Y | 종목 코드 |

#### 4.3.3 compare_stocks (P2)

**설명**: 여러 종목을 비교 분석합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| symbols | string[] | Y | 종목 코드 배열 (최대 5개) |

#### 4.3.4 get_market_summary (P2)

**설명**: 시장 전반 요약 정보를 제공합니다.

| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| market | string | N | 시장 (us, kr, global) |

### 4.4 웹 클라이언트 기능

#### 4.4.1 대시보드 (P1)

**주요 기능**:
- 관심 종목 위젯: 실시간 가격 모니터링
- 포트폴리오 요약: 총 자산, 수익률 차트
- 시장 현황: 주요 지수 (KOSPI, KOSDAQ, S&P500, NASDAQ)
- 환율 현황: 주요 통화 실시간 환율

#### 4.4.2 종목 상세 페이지 (P1)

**주요 기능**:
- 실시간 호가창
- 캔들스틱 차트 (TradingView 연동)
- 관련 뉴스 피드
- 기업 정보 및 재무제표

#### 4.4.3 포트폴리오 관리 (P2)

**주요 기능**:
- 포트폴리오 생성/수정/삭제
- 거래 내역 기록
- 수익률 추적 차트
- 자산 배분 파이 차트
- 리밸런싱 추천

#### 4.4.4 설정 (P2)

**주요 기능**:
- 알림 설정 (가격 알림, 뉴스 알림)
- API 키 관리
- 테마 설정 (라이트/다크)

### 4.5 비기능 요구사항

#### 4.5.1 성능 (Performance)

| 항목 | 요구사항 |
|------|----------|
| MCP 도구 응답 시간 | p50: 1초, p95: 3초, p99: 5초 |
| 웹 클라이언트 로딩 | 초기 로딩 3초 이내 |
| 동시 연결 | 최소 1,000개 동시 연결 지원 |
| API 호출 제한 | 사용자당 분당 60회 |

#### 4.5.2 보안 (Security)

| 항목 | 요구사항 |
|------|----------|
| 인증 | JWT 기반 인증 |
| 암호화 | HTTPS/TLS 1.3 필수 |
| API 키 관리 | 환경 변수 또는 시크릿 매니저 사용 |
| 입력 검증 | 모든 사용자 입력 검증 (Zod 스키마) |
| Rate Limiting | IP/사용자 기반 요청 제한 |

#### 4.5.3 확장성 (Scalability)

| 항목 | 요구사항 |
|------|----------|
| 수평 확장 | 컨테이너 기반 배포로 수평 확장 가능 |
| 캐싱 | Redis를 활용한 응답 캐싱 |
| 데이터베이스 | 읽기 복제본 지원 |

#### 4.5.4 가용성 (Availability)

| 항목 | 요구사항 |
|------|----------|
| 가동 시간 | 99.9% (월간 43분 미만 다운타임) |
| 장애 복구 | 자동 장애 감지 및 복구 |
| 백업 | 일일 자동 백업 |

---

## 5. 기술 스택 제안

### 5.1 MCP 서버

| 계층 | 기술 | 선정 이유 |
|------|------|----------|
| 런타임 | Node.js 20 LTS | MCP SDK 공식 지원, 비동기 처리 우수 |
| 언어 | TypeScript 5.x | 타입 안정성, 개발 생산성 |
| MCP SDK | @modelcontextprotocol/sdk | 공식 SDK, 안정적 지원 |
| 스키마 검증 | Zod | 런타임 타입 검증, MCP SDK 호환 |
| HTTP 클라이언트 | Axios | 금융 API 호출용 |

### 5.2 외부 API

| 데이터 | API 후보 | 비용 | 비고 |
|--------|----------|------|------|
| 미국 주식 | Yahoo Finance API | 무료/유료 | 실시간 15분 지연 |
| 한국 주식 | 한국투자증권 OpenAPI | 무료 | 실시간, 계좌 필요 |
| 뉴스 | NewsAPI / Google News | 무료/유료 | 일일 제한 있음 |
| 환율 | ExchangeRate-API | 무료/유료 | 실시간 환율 |

### 5.3 웹 클라이언트

| 계층 | 기술 | 선정 이유 |
|------|------|----------|
| 프레임워크 | Next.js 15 | SSR, App Router, 풍부한 생태계 |
| 언어 | TypeScript | 서버와 타입 공유 가능 |
| 스타일링 | Tailwind CSS | 빠른 개발, 일관된 디자인 |
| 상태 관리 | Zustand | 경량, 간단한 API |
| 차트 | TradingView Lightweight Charts | 금융 차트 전문 라이브러리 |
| 데이터 페칭 | TanStack Query | 캐싱, 재시도, 실시간 동기화 |

### 5.4 인프라

| 구성요소 | 기술 | 비고 |
|----------|------|------|
| 컨테이너 | Docker | 일관된 배포 환경 |
| 오케스트레이션 | Docker Compose (개발) / Kubernetes (운영) | 확장성 |
| 호스팅 | Vercel (웹) / Railway 또는 Fly.io (MCP 서버) | 쉬운 배포 |
| 캐싱 | Redis (Upstash) | 서버리스 Redis |
| 데이터베이스 | PostgreSQL (Supabase) | 사용자 데이터 저장 |
| 모니터링 | Sentry + Datadog | 에러 추적, APM |

### 5.5 개발 도구

| 용도 | 도구 |
|------|------|
| 패키지 관리 | pnpm |
| 린팅 | ESLint + Prettier |
| 테스트 | Vitest + Playwright |
| CI/CD | GitHub Actions |
| 문서화 | TypeDoc + Storybook |

---

## 6. 기능 우선순위 및 로드맵

### 6.1 우선순위 매트릭스 (RICE 스코어)

| 기능 | Reach | Impact | Confidence | Effort | RICE Score | 우선순위 |
|------|-------|--------|------------|--------|------------|----------|
| get_stock_price | 1000 | 3 | 90% | 2주 | 1350 | P0 |
| analyze_portfolio | 600 | 3 | 80% | 3주 | 480 | P0 |
| get_investment_news | 800 | 2 | 85% | 2주 | 680 | P0 |
| get_exchange_rate | 500 | 2 | 90% | 1주 | 900 | P0 |
| 웹 대시보드 | 400 | 3 | 70% | 4주 | 210 | P1 |
| get_stock_chart | 600 | 2 | 75% | 2주 | 450 | P1 |
| get_company_info | 400 | 2 | 80% | 2주 | 320 | P1 |
| 포트폴리오 관리 UI | 300 | 3 | 70% | 5주 | 126 | P2 |
| compare_stocks | 300 | 2 | 70% | 2주 | 210 | P2 |
| 알림 기능 | 200 | 2 | 60% | 3주 | 80 | P3 |

### 6.2 개발 로드맵

#### Phase 1: MVP (2026-02-03 ~ 2026-03-15) - 6주

**목표**: 핵심 MCP 도구 완성 및 기본 동작 검증

| 주차 | 작업 내용 |
|------|----------|
| 1주 | 프로젝트 세팅, API 리서치 및 선정 |
| 2주 | get_stock_price 구현 (미국/한국 주식) |
| 3주 | get_exchange_rate 구현, 에러 핸들링 |
| 4주 | get_investment_news 구현 |
| 5주 | analyze_portfolio 구현 |
| 6주 | 통합 테스트, 문서화, MVP 배포 |

**산출물**:
- 동작하는 MCP 서버 (4개 도구)
- Claude Desktop 연동 가이드
- API 문서

#### Phase 2: Beta (2026-03-16 ~ 2026-04-30) - 6주

**목표**: 웹 클라이언트 출시 및 추가 도구 확장

| 주차 | 작업 내용 |
|------|----------|
| 1-2주 | 웹 클라이언트 기본 구조, 대시보드 |
| 3주 | get_stock_chart 구현 |
| 4주 | get_company_info 구현 |
| 5주 | 종목 상세 페이지, 차트 연동 |
| 6주 | Beta 테스트, 피드백 수집 |

**산출물**:
- 웹 대시보드 (기본 기능)
- 추가 MCP 도구 2개
- Beta 테스터 피드백 리포트

#### Phase 3: 정식 출시 (2026-05-01 ~ 2026-06-30) - 8주

**목표**: 전체 기능 완성 및 프리미엄 플랜 출시

| 주차 | 작업 내용 |
|------|----------|
| 1-2주 | 포트폴리오 관리 UI |
| 3-4주 | compare_stocks, get_market_summary |
| 5주 | 사용자 인증, 프리미엄 기능 |
| 6주 | 알림 기능 (가격 알림) |
| 7주 | 성능 최적화, 보안 강화 |
| 8주 | 정식 출시, 마케팅 |

**산출물**:
- 전체 기능 완성된 서비스
- 프리미엄 구독 시스템
- 마케팅 자료

### 6.3 릴리즈 계획

| 버전 | 날짜 | 주요 내용 |
|------|------|----------|
| v0.1.0-alpha | 2026-02-17 | get_stock_price 첫 동작 버전 |
| v0.2.0-alpha | 2026-03-01 | 4개 핵심 도구 완성 |
| v1.0.0-mvp | 2026-03-15 | MVP 공개 출시 |
| v1.1.0-beta | 2026-04-15 | 웹 대시보드 베타 |
| v1.2.0-beta | 2026-04-30 | 추가 도구 및 차트 |
| v2.0.0 | 2026-06-30 | 정식 출시 |

---

## 7. 성공 지표 및 분석

### 7.1 핵심 성과 지표 (KPIs)

#### 7.1.1 기술 지표

| 지표 | 정의 | 목표 | 측정 방법 |
|------|------|------|----------|
| 도구 호출 성공률 | 성공 호출 / 전체 호출 | 99% | 서버 로그 분석 |
| 평균 응답 시간 | API 응답 평균 시간 | 2초 | APM 모니터링 |
| p95 응답 시간 | 95번째 백분위 응답 시간 | 3초 | APM 모니터링 |
| 에러율 | 에러 응답 / 전체 응답 | 1% 미만 | 에러 로그 분석 |
| 가동 시간 | 서비스 가용 시간 비율 | 99.9% | 업타임 모니터링 |

#### 7.1.2 사용자 지표

| 지표 | 정의 | 목표 | 측정 방법 |
|------|------|------|----------|
| DAU | 일일 활성 사용자 | 1,000명 (3개월 후) | 분석 도구 |
| MAU | 월간 활성 사용자 | 5,000명 (6개월 후) | 분석 도구 |
| 세션당 도구 호출 수 | 평균 MCP 도구 호출 횟수 | 5회 이상 | 로그 분석 |
| 리텐션 (D7) | 7일 후 재방문율 | 40% | 코호트 분석 |
| 리텐션 (D30) | 30일 후 재방문율 | 25% | 코호트 분석 |

#### 7.1.3 비즈니스 지표

| 지표 | 정의 | 목표 | 측정 방법 |
|------|------|------|----------|
| 전환율 | 무료 -> 프리미엄 | 10% | 구독 데이터 |
| MRR | 월간 반복 수익 | $5,000 (6개월 후) | 결제 데이터 |
| NPS | 순 추천 지수 | 40 이상 | 설문 조사 |
| CAC | 고객 획득 비용 | $10 이하 | 마케팅 비용 분석 |

### 7.2 분석 요구사항

#### 7.2.1 이벤트 트래킹

```typescript
// 추적할 주요 이벤트
interface AnalyticsEvents {
  // MCP 서버 이벤트
  "mcp.tool.called": { tool: string; params: object };
  "mcp.tool.success": { tool: string; responseTime: number };
  "mcp.tool.error": { tool: string; error: string };

  // 웹 클라이언트 이벤트
  "web.page.view": { page: string };
  "web.stock.search": { query: string };
  "web.portfolio.create": { holdingsCount: number };
  "web.subscription.started": { plan: string };
}
```

#### 7.2.2 대시보드 요구사항

| 대시보드 | 포함 지표 | 갱신 주기 |
|----------|----------|----------|
| 실시간 모니터링 | 현재 연결 수, 분당 요청 수, 에러율 | 실시간 |
| 일일 리포트 | DAU, 도구별 호출 수, 평균 응답 시간 | 일별 |
| 주간 리포트 | WAU, 리텐션, 인기 종목/키워드 | 주별 |
| 월간 리포트 | MAU, MRR, NPS, 성장률 | 월별 |

### 7.3 성공 기준

#### 7.3.1 MVP 성공 기준 (2026-03-15)

| 기준 | 목표 | 측정 방법 |
|------|------|----------|
| 기능 완성도 | 4개 핵심 도구 100% 동작 | 테스트 통과 |
| 안정성 | 24시간 연속 운영 성공 | 가동 시간 모니터링 |
| 성능 | 평균 응답 시간 3초 이내 | 부하 테스트 |
| 사용자 검증 | 10명 이상 외부 테스터 긍정 피드백 | 피드백 수집 |

#### 7.3.2 정식 출시 성공 기준 (2026-06-30)

| 기준 | 목표 | 측정 방법 |
|------|------|----------|
| 사용자 수 | MAU 1,000명 달성 | 분석 도구 |
| 수익 | MRR $1,000 달성 | 결제 시스템 |
| 만족도 | NPS 30 이상 | 설문 조사 |
| 안정성 | 가동 시간 99.5% | 모니터링 |

---

## 8. 리스크 및 대응 전략

### 8.1 리스크 매트릭스

| 리스크 | 발생 확률 | 영향도 | 리스크 수준 | 대응 전략 |
|--------|----------|--------|-------------|----------|
| 외부 API 서비스 중단 | 중 | 상 | 높음 | 다중 API 제공자 확보, 캐싱 강화 |
| API 비용 초과 | 중 | 중 | 중간 | 요청 제한, 캐싱, 비용 모니터링 |
| 법적 규제 이슈 | 낮 | 상 | 중간 | 법률 검토, 면책 조항 명시 |
| 개인정보 유출 | 낮 | 상 | 중간 | 암호화, 보안 감사, 최소 수집 |
| 경쟁사 출현 | 중 | 중 | 중간 | 차별화 기능 개발, 빠른 이터레이션 |
| 기술 부채 누적 | 중 | 중 | 중간 | 정기 리팩토링, 코드 리뷰 강화 |

### 8.2 위험 완화 계획

#### 8.2.1 외부 API 의존성

**문제**: Yahoo Finance 등 외부 API가 중단되면 서비스 불가

**대응**:
1. 1차 API 장애 시 대체 API 자동 전환
2. 응답 결과 Redis 캐싱 (TTL: 1-5분)
3. 주요 데이터 일일 백업
4. API 상태 모니터링 및 알림

#### 8.2.2 투자 정보 법적 이슈

**문제**: 투자 조언으로 오해받아 법적 문제 발생 가능

**대응**:
1. 서비스 이용 약관에 면책 조항 명시
2. 모든 응답에 "투자 조언이 아님" 고지
3. 금융 관련 법률 전문가 검토
4. 개인화된 추천 기능 제외 또는 제한

---

## 9. 부록

### 9.1 용어 정의

| 용어 | 정의 |
|------|------|
| MCP | Model Context Protocol - AI 모델이 외부 도구와 상호작용하기 위한 프로토콜 |
| 종목 코드 | 주식을 식별하는 고유 코드 (예: AAPL, 005930.KS) |
| 포트폴리오 | 투자자가 보유한 자산의 집합 |
| 리밸런싱 | 목표 자산 배분 비율을 유지하기 위해 자산을 재조정하는 것 |
| Beta | 시장 대비 주식의 변동성을 나타내는 지표 |

### 9.2 참고 자료

- [MCP 공식 문서](https://modelcontextprotocol.io)
- [MCP TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)
- [Yahoo Finance API](https://finance.yahoo.com)
- [한국투자증권 OpenAPI](https://apiportal.koreainvestment.com)

### 9.3 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-02-02 | - | 초안 작성 |

---

## 10. 승인

| 역할 | 이름 | 서명 | 날짜 |
|------|------|------|------|
| Product Manager | | | |
| Tech Lead | | | |
| Design Lead | | | |
| Stakeholder | | | |
